# Creation >> Store

## Main
- Store создается через функцию `createStore`.
- Функцию `createStore()` можно создать вручную (описано ниже в tutorial), либо автоматически через redux-npm-пакет.

## Creation >> Store
1. Cоздается модуль `create-store.js`.
1. Создается функция `createStore`.
1. В функцию передаются следующие аргументы:
    - `reducer`  
    - `initialState`  
    Первоначальное состояние.
    - `applyMiddleware` (опционально)
    - `compose` (опционально)
    - др.
1. -> `initialState` можно не передавать в виде аргумента. Вместо этого можно присвоить значения `state` по умолчанию для каждого редюсера в аргументах соответствующего `reducer`.  
Т.е. `createStore` имеет undefined => берется значение по умолчанию.  
Синтаксис:

    ```
    function reducer(state = 'stateValue', action) {}
    ``` 
    Преимущества техники:
      - Позволяет задавать уникальный `state` для разных редюсеров.

    Особености техники: 
      - В этом случае `state` становится объектом.  
      => для обращения к полю `state`, установленному конкретным редюсером, необходимо использовать синтаксис вида:

        ```
        state.reducerKeyName
        ```
1. Внутри функции создается переменная `state`.  
Данная переменная хранит state всего приложения.
1. Инициализируется изначальный state.  
Инициализация производится через `reducer` cо следующими аргументами:
    - `initialState`
    - `action` c `type: __INIT__`
1. Внутри функции создается переменная `subscribers`.  
Переменная содержит массив с подписчиками.
1. Функция возвращает объект с тремя методами:
    - `dispatch`
    - `subscribe`
    - `getState`

## Creation >> Store >> dispatch()
1. Функция принимает аргументы:
    - `action`
1. В функции реализуется механизм изменения `state` посредством `reducer`.
1. В функции реализуется алгоритм извещения подписчиков:
    1. Имеем массив `subscribers` (все подписчики состояния ((каждый подписчик - это функция )).
    1. Пробегаемся по массиву `subscribers` через forEach и на каждой итерации вызываем подписчика.

## Creation >> Store >> subscribe()
1. Функция в качестве аргумента принимает callback, который является  функцией, подписывающейся на изменения в `state` и срабатываемая каждый раз в случае этих изменений.
1. В функции реализуется добавление новой функции-подписчика в массив `subscribers` посредством передачи callback-а push-методом.

## Creation >> Store >> getState()
Функция, которая возвращает текущий `state`.