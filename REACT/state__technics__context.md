# STATE: CONTEXT

## Syntax >> Context obj
- Context obj - это объект, на который могут подписаться другие React-компоненты, вследствие чего они будут получать контекст из ближайшего подходящего (выше в дереве) `Provider`.
```
const myContext = React.createContext(defaultValue)
```
- `defaultValue` - это значение по умолчанию, которое будет использоваться в том случае, если для компонента нет подходящего `Provider`.
  - Полезно для тестирования компонентов без необходимости оборачивать их.
  - Значение не будет использоваться, даже если значение `Provider` это undefined.

## Syntax >> Provider
- Это компонент, который используется вместе с объектом контекста, и позволяющий его дочерним компонентам подписаться на изменения контекста.
```
<MyContext.Provider value={someValue}>
```
- `value` - это проп, который передается во все дочерние компоненты провайдера, подписанные на контекст.
  - При изменении пропа все дочерние компоненты провайдера рендерятся (В т.ч. .contextType и useContext, даже если родитель блокирует ререндеринг через shouldComponentUpdate).
  - Наличие изменений определяется через механизм, схожий с `Object.is`
- `Provider` [Может быть связан с несколькими компонентами, потребляющими контекст]-?
- `Provider` могут быть вложены друг в друга, переопределяя значения контекста глубже в дереве.

## Syntax >> contextType
- Это свойство класса, в которое может быть назначен объект контекста.
- -> Затем можно использовать ближайшее и актуальное значение контекста через `this.context`
- По умолчанию подписывает только на один контекст.  
Если необходимо несколько:
  - публичные поля класса
  - техника использования нескольких контекстов >>
```
class MyClass extends React.Component {
  render() {
    let value = this.context;
  }
}
MyClass.contextType = MyContext;
```

## Syntax >> consumer

- Это react-компонент, который подписывается на изменения контекста
- Использование этого компонента позволяет подписаться на контекст в функциональном компоненте.
- Принимает функцию в качестве дочернего элемента, которая принимает контекст в качестве аргумента (проп value ближайшего сверху провайдера, либо defaultValue) и возвращает react-компонент.
- Синтаксис:
```
<MyContext.Consumer>
  {value => /* отрендерить что-то, используя значение контекста */}
</MyContext.Consumer>
```

## Practice

- Динамический контекст
- Изменение контекста из вложенного компонента
- Использование нескольких контекстов

## Draft
- Контекст - это техника, позволяющая передавать данные через дерево компонентов без необходимости [ передавать пропсы на промежуточных уровнях ]-?
- Контекст предоставляет способ делиться данными между компонентами без явной передачи пропсов через каждый уровень дерева.
- Контекст предназначен для следующих данных:
  - Глобальные для всего дерева react-компонентов (выбранный язык, UI-тема, текущий аутентифицированный пользователь)
- Решает минус подъема состояния: когда имеются промежуточные компоненты, которые осуществляют исключительно транзит пропсов к месту назначения
- Использовать необходимо, когда требуется обеспечить доступ во многих компонентах на разных уровнях вложенности.
- Минус техники: затрудняется переиспользование компонента.

## ToDo
- Разобрать весь draft
- Сделать practice