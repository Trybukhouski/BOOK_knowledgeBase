# STATE

## About
- ..Объект, содержащий данные, которые необходимо периодически обновлять..  
Приложение реагирует на изменение state и предоставляет обновленный UI.
- Состояние - это модель, описывающая то, как ведет себя приложение.  
Пример: при нажатии на кнопку включилась темная тема. 
- Состояние описывает изменение приложения относительно изначальных характеристик.
- Чтобы изменить что-то в шаблоне, мы должны изменить состояние.

## Architecture
[
- Расположение состояния приложения:
  - Внутри компонентов.
  - В отдельном абстрактном слое. 
- Best practice - хранение состояния в отдельном абстрактном слое.это разделение слоя представления и слоя данных
- Разделение слоев данных и представления происходит через redux.
- Состояние внутри компонента - это плохо:
  - сложно рефакторить взаимодействия между компонентами:
    - сложно понять, как состояния связаны и как влияют на другие места в коде.
  - Сложно масштабировать приложение.
- Состояние в отдельном слое - это хорошо:
  - Есть абстрактный слой для работы с данными, отделенный от представления.
]-_переписать короче и очевиднее_


## HIT
- Данные state: 
  - те, о которых должно знать приложение.
  - те, которые могут со временем меняться.
  - создаются в компоненте.
  - полностью контролируются компонентом
- React предоставляет методы для редактирования полей state.
- Состояние компонента инкапсулировано: другие компоненты не знают о нем.
- State можно передавать:
  - вниз по дереву компонентов (top-down / unidirectional поток данных) в виде пропсов дочерних компонентов.  
  _ISW_ В атрибут компонента передается ссылка на родительский state, который попадает в компонент в виде propsa.

## Syntax >> Creation

- Объект state определяется только через конструктор класса.

  ```
  constructor {
    this.state = {
      propName: propValue;
    }
  }
  ```
- state содержит начальные состояния компонента.

## Syntax >> Update state
- Через `setState()`:
  ```
  setState({
    propName: newPropValue
  })
  ```
- Правила обновления:
  - Запрещено изменять state напрямую (this.state.newPropName = "new Value").  
  Разрешено только через специальные, описанные выше методы.
  - Не полагаться на текущее состояние state при его изменении на следующее (т.к. `setState` асинхронен).  
  Необходимо использовать `setState()` с аргументом  в виде функции, в которую аргументом передается текущее состояние.
  - Текущее и обновленное состояния объединяются.  
  Таким образом, можно обновлять разные поля state отдельными вызовами `setState()`.

## Syntax >> Using state
  ```
  {this.state.propName}
  ```
  - Данный код вставляется в изменяемое место JSX.
  - Также можно присвоить свойство state переменной и использовать в JSX переменную вместо вышеописанной конструкции.

